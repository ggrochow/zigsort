---
import Layout from '../layouts/Layout.astro';
---

<script>
  async function instantiateWasmModule() {
    const wasmEnv = {
      env: {
      },
    };
  
    const mod = await WebAssembly.instantiateStreaming(
      fetch("pixelsorter.wasm"),
      wasmEnv,
    );

    return mod;
  }

  instantiateWasmModule()
  .then((mod) => {
      const result = mod.instance.exports.add(1, 2);
      console.log("got", result, "from wasm");
    })
  .catch((e) => {
    console.error(e);
  })
</script>

<Layout title="Welcome to Astro.">
	<main>
    <div class="controls">
      <input type='file' id='file_input'>
    </div>
    <canvas id='canvas'>
	</main>
</Layout>

<style>

html, main, body {
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

#canvas {
  height: 95%;
  width: 95%;
  border: 1px solid red;
}
  
</style
